---
// VideoSection component for embedding Vimeo video
// Uses facade pattern to lazy load the iframe only when user interacts
const videoId = "1142285516";
const thumbnailUrl = `https://vumbnail.com/${videoId}.jpg`;
---

<div class="mt-16 md:mt-24">
  <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight bg-gradient-to-r from-purple-500 to-cyan-500 bg-clip-text text-transparent text-center">
    Watch Now
  </h2>
  <p class="text-lg mt-4 text-slate-600 text-center max-w-2xl mx-auto">
    Check out our latest video and get a glimpse into the world of DJStrappy.
  </p>
  <div class="mt-8 flex justify-center">
    <div 
      id="video-facade"
      class="video-facade w-full max-w-4xl aspect-video rounded-lg overflow-hidden shadow-xl cursor-pointer relative"
      data-video-id={videoId}
    >
      <img 
        src={thumbnailUrl}
        alt="DJStrappy Video Thumbnail - Click to play"
        class="w-full h-full object-cover"
        loading="lazy"
        decoding="async"
      />
      <button 
        class="play-button absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition-colors"
        aria-label="Play video"
      >
        <svg class="w-16 h-16 md:w-20 md:h-20 text-white drop-shadow-lg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M8 5v14l11-7z"/>
        </svg>
      </button>
    </div>
  </div>
</div>

<style>
  .video-facade:focus-within .play-button {
    background-color: rgba(0, 0, 0, 0.4);
  }
</style>

<script>
  const facade = document.getElementById('video-facade');
  
  // Fail fast if facade element is not found
  if (facade) {
    function loadVideo() {
      const videoId = facade.dataset.videoId;
      const iframe = document.createElement('iframe');
      iframe.src = `https://player.vimeo.com/video/${videoId}?h=&title=0&byline=0&portrait=0&autoplay=1`;
      iframe.className = 'w-full h-full border-0';
      iframe.allow = 'autoplay; fullscreen; picture-in-picture';
      iframe.allowFullscreen = true;
      iframe.title = 'DJStrappy Video';
      
      facade.replaceChildren(iframe);
      facade.classList.remove('cursor-pointer');
    }
    
    facade.addEventListener('click', loadVideo, { once: true });
  }
</script>
