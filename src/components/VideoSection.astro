---
// VideoSection component for embedding Vimeo video with lazy loading facade
// Uses a placeholder that only loads the iframe when the user clicks play
---

<div class="mt-16 md:mt-24">
  <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight bg-gradient-to-r from-purple-500 to-cyan-500 bg-clip-text text-transparent text-center">
    Watch Now
  </h2>
  <p class="text-lg mt-4 text-slate-600 text-center max-w-2xl mx-auto">
    Check out our latest video and get a glimpse into the world of DJStrappy.
  </p>
  <div class="mt-8 flex justify-center">
    <div class="w-full max-w-4xl aspect-video rounded-lg overflow-hidden shadow-xl relative">
      <!-- Video facade for lazy loading - shows placeholder until user clicks -->
      <div id="video-facade" class="video-facade w-full h-full bg-gradient-to-br from-purple-600 to-cyan-500 flex items-center justify-center cursor-pointer">
        <button type="button" aria-label="Play video" class="play-button">
          <svg class="w-20 h-20 text-white drop-shadow-lg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z"/>
          </svg>
        </button>
        <span class="sr-only">Click to load and play video</span>
      </div>
      <!-- Iframe container - iframe loads only when facade is clicked -->
      <div id="video-container" class="hidden w-full h-full"></div>
    </div>
  </div>
</div>

<style>
  .video-facade {
    transition: opacity 0.3s ease;
  }

  .video-facade:hover .play-button {
    transform: scale(1.1);
  }

  .play-button {
    transition: transform 0.2s ease;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 50%;
    padding: 1rem;
    border: none;
    cursor: pointer;
  }

  .hidden {
    display: none;
  }
</style>

<script>
  const facade = document.getElementById('video-facade');
  const container = document.getElementById('video-container');

  function loadVideo(): void {
    if (!facade || !container) return;
    
    // Create and insert the iframe only when user clicks
    const iframe = document.createElement('iframe');
    iframe.src = 'https://player.vimeo.com/video/1142285516?h=&title=0&byline=0&portrait=0&autoplay=1';
    iframe.className = 'w-full h-full border-0';
    iframe.allow = 'autoplay; fullscreen; picture-in-picture';
    iframe.allowFullscreen = true;
    iframe.title = 'DJStrappy Video';
    
    container.appendChild(iframe);
    container.classList.remove('hidden');
    facade.classList.add('hidden');
  }

  facade?.addEventListener('click', loadVideo);
</script>
